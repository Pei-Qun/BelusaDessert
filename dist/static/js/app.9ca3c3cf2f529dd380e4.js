webpackJsonp([1],{"+IR8":function(t,a){},"6fgk":function(t,a){},"7Otq":function(t,a,e){t.exports=e.p+"static/img/logo.82fbda3.png"},"7jI3":function(t,a){},CCNs:function(t,a){},IdH5:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA8CAYAAADxJz2MAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM1QUNDNjhGMjlGNjExRTlBQUFGQjgwOUY0MzNCRDM2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM1QUNDNjkwMjlGNjExRTlBQUFGQjgwOUY0MzNCRDM2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzVBQ0M2OEQyOUY2MTFFOUFBQUZCODA5RjQzM0JEMzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzVBQ0M2OEUyOUY2MTFFOUFBQUZCODA5RjQzM0JEMzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6Ms7ITAAAAZklEQVR42uzQMQEAAAgDILV/59nBwwsi0EmKu1EgUKBAgQgUKFAgAgUKFIhAgQIFIlCgQIEIFChQIAIFChSIQIECBSJQoECBCBQoUCACBQoUKBCBAgUKRKBAgQIRKFCgQAR+WQEGAMfMA3V7K0HJAAAAAElFTkSuQmCC"},"J/+0":function(t,a){},JYcC:function(t,a,e){t.exports=e.p+"static/img/logo-s.25e885f.png"},KIFn:function(t,a){},KxQn:function(t,a){},MW5s:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i=e("mtWM"),n=e.n(i),o=e("ZZvs"),r=e.n(o),c=(e("SYh3"),e("K3J8"),e("Rf8U")),l=e.n(c),d=e("sUu7"),u=e("1SbN"),v=e.n(u),p=e("7QTg"),m=e.n(p),_=(e("v2ns"),{render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]});var h=e("VU/8")({name:"App",created:function(){}},_,!1,function(t){e("shAo")},null,null).exports,g=e("/ocq"),f=e("7t+N"),C=e.n(f),b={data:function(){return{cartVal:0}},created:function(){C()(window).on("scroll",function(t){C()(window).scrollTop()>1?C()(".navbar").addClass("scrolled"):C()(".navbar").removeClass("scrolled")});var t=this;t.$bus.$on("get:cartval",function(a){t.cartVal=a})}},y={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"marquee"},[t._m(0),t._v(" "),e("marquee",[t._v("店長生日! 優惠碼大開放~ 輸入優惠碼: coupon 即可享有全館六折優惠!!")])],1),t._v(" "),e("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-primary fixed-top"},[e("div",{staticClass:"container"},[t._m(1),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarTogglerDemo02"}},[e("ul",{staticClass:"navbar-nav mr-auto mt-2 mt-lg-0 ml-lg-3"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("\n              首頁\n            ")])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/product"}},[t._v("\n              產品列表\n            ")])],1)]),t._v(" "),e("ul",{staticClass:"account-nav"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/cart"}},[e("i",{staticClass:"fas fa-shopping-cart"}),t._v(" 購物車("+t._s(t.cartVal)+")\n            ")])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[e("i",{staticClass:"fas fa-cog"}),t._v(" 後台管理\n            ")])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",[a("i",{staticClass:"fas fa-bullhorn"}),this._v(" 特價報告")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"logo-area"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[a("img",{attrs:{src:e("7Otq"),alt:""}})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("i",{staticClass:"fas fa-bars"})])}]};var x={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"footer"},[a("a",{attrs:{href:"https://github.com/Pei-Qun/vue-ci-test",target:"_blank"}},[a("i",{staticClass:"fab fa-github-alt"})]),this._v(" "),a("p",[this._v("僅個人練習使用．不做商業用途")])])}]};var w={components:{Frontnav:e("VU/8")(b,y,!1,function(t){e("KxQn")},"data-v-4484dc70",null).exports,Frontfooter:e("VU/8")(null,x,!1,function(t){e("tH/D")},"data-v-00f8dfb8",null).exports}},$={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("Frontnav"),this._v(" "),a("router-view"),this._v(" "),a("Frontfooter")],1)},staticRenderFns:[]},D=e("VU/8")(w,$,!1,null,null,null).exports,k={data:function(){return{products:[],status:{loadingItem:""},isLoading:!1,swiperOption:{slidesPerView:3,spaceBetween:30,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{1024:{slidesPerView:2,spaceBetween:30},768:{slidesPerView:1,spaceBetween:30}}}}},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/products").then(function(a){t.products=a.data.products,t.isLoading=!1,console.log(a)})},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this;e.status.loadingItem=t;var s={product_id:t,qty:a};this.$http.post("https://vue-course-api.hexschool.io/api/belusa/cart",{data:s}).then(function(t){e.status.loadingItem="",e.getCartVal(),console.log(t)})},getCartVal:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(e){a.isLoading=!1,t.$bus.$emit("get:cartval",e.data.data.carts.length)})}},created:function(){this.getProducts(),this.getCartVal()}},I={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"banner"}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"hot-sell"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center"},[t._m(1),t._v(" "),e("div",{staticClass:"col-sm-8 col-md-12"},[e("swiper",{attrs:{options:t.swiperOption}},[t._l(t.products,function(a){return a.is_enabled?e("swiper-slide",{key:a.id},[e("div",{staticClass:"card border-0 shadow-sm mb-5"},[e("div",{staticClass:"pro-pic",style:{backgroundImage:"url("+a.imageUrl+")"}},[e("span",{staticClass:"badge badge-warning float-right ml-2"},[t._v(t._s(a.category))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(a.description))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.origin_price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.price))+" 元")]),t._v(" "),a.origin_price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(a.origin_price))+" 元")]):t._e(),t._v(" "),a.origin_price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(a.price))+" 元")]):t._e()])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(t){}}},[t._v("\n                    查看更多\n                  ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){t.addtoCart(a.id)}}},[a.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n                    加到購物車\n                  ")])])])]):t._e()}),t._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"news"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-7 text-con"},[e("div",{staticClass:"con"},[e("h3",{staticClass:"text-primary"},[t._v("最新消息 News")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("2019 "),e("b",[t._v("01/29")])]),t._v("\n                豬事如意，過年期間全館八折起～\n              ")]),t._v(" "),e("li",[e("p",[t._v("2019 "),e("b",[t._v("01/21")])]),t._v("\n                店長生日！輸入此優惠碼即可享六折：coupon\n              ")]),t._v(" "),e("li",[e("p",[t._v("2019 "),e("b",[t._v("01/15")])]),t._v("\n                想不到梗了，就這樣吧，這是最新消息\n              ")]),t._v(" "),e("li",[e("p",[t._v("2019 "),e("b",[t._v("01/01")])]),t._v("\n                新年快樂！全台實體店面店休一天\n              ")]),t._v(" "),e("li",[e("p",[t._v("2018 "),e("b",[t._v("12/01")])]),t._v("\n                belusa 店商網站開店啦~\n              ")])])])]),t._v(" "),e("div",{staticClass:"col-lg-5 pic-con"})])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-sm-12 col-md-12"},[a("h3",[this._v("熱銷產品")])])}]};var L=e("VU/8")(k,I,!1,function(t){e("MW5s")},"data-v-2e5ad40c",null).exports,A={data:function(){return{products:[],filter:{list:["全部商品","巧克力","糕點區","糖果類","禮盒區"],str:"全部商品"},status:{loadingItem:""},isLoading:!1}},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/products/all").then(function(a){if(t.isLoading=!1,"全部商品"!==t.filter.str){var e=a.data.products.filter(function(a,e,s){return a.category==t.filter.str});t.products=e}else t.products=a.data.products})},changeCategory:function(t){this.filter.str=t,this.getProducts()},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this;e.status.loadingItem=t;var s={product_id:t,qty:a};this.$http.post("https://vue-course-api.hexschool.io/api/belusa/cart",{data:s}).then(function(t){e.status.loadingItem="",e.getCartVal(),console.log(t)})},getCartVal:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(e){a.isLoading=!1,t.$bus.$emit("get:cartval",e.data.data.carts.length)})}},created:function(){this.getProducts(),this.getCartVal();var t=function(){var t=C()(window).scrollTop(),a=C()(".page-banner").height()+85;if(document.body.clientWidth>974&&t>a){var e=C()(".menu").parent().width();C()(".menu").addClass("fixed"),C()(".menu").css("width",e)}else C()(".menu").removeClass("fixed"),C()(".menu").css("width","100%")};C()(window).on("scroll",function(){t()}).resize(function(){t()})}},N={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"page-banner"}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-3 menu-area"},[e("div",{staticClass:"menu"},[e("h3",[t._v("商品分類")]),t._v(" "),e("ul",t._l(t.filter.list,function(a,s){return e("li",{key:s},[e("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.changeCategory(a)}}},[t._v(t._s(a))])])}),0)])]),t._v(" "),e("div",{staticClass:"col-lg-9"},[e("div",{staticClass:"row"},t._l(t.products,function(a){return a.is_enabled?e("div",{key:a.id,staticClass:"col-xl-4 col-lg-6 col-md-6"},[e("div",{staticClass:"card border-0 shadow-sm mb-5"},[e("div",{staticClass:"pro-pic",style:{backgroundImage:"url("+a.imageUrl+")"}},[e("span",{staticClass:"badge badge-warning float-right ml-2"},[t._v(t._s(a.category))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.origin_price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.price))+" 元")]),t._v(" "),a.origin_price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(a.origin_price)))]):t._e(),t._v(" "),a.origin_price?e("div",{staticClass:"h5"},[t._v("特價 "+t._s(t._f("currency")(a.price)))]):t._e()])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:"/item/"+a.id}},[t._v("\n                    查看更多\n                  ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){t.addtoCart(a.id)}}},[a.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n                    加到購物車\n                  ")])],1)])]):t._e()}),0)])])])])],1)},staticRenderFns:[]};var E=e("VU/8")(A,N,!1,function(t){e("CCNs")},"data-v-779b0162",null).exports,U={data:function(){return{product:{},itemId:"",temp:{num:1},status:{loadingItem:""},isLoading:!1}},methods:{getItem:function(){var t=this,a="https://vue-course-api.hexschool.io/api/belusa/product/"+t.itemId;t.isLoading=!0,this.$http.get(a).then(function(a){t.product=a.data.product,t.isLoading=!1})},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this;e.status.loadingItem=t;var s={product_id:t,qty:a};this.$http.post("https://vue-course-api.hexschool.io/api/belusa/cart",{data:s}).then(function(t){e.status.loadingItem="",e.getCartVal(),console.log(t)})},getCartVal:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(e){a.isLoading=!1,t.$bus.$emit("get:cartval",e.data.data.carts.length)})}},created:function(){this.itemId=this.$route.params.itemId,this.getItem()}},M={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"all"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 d-flex justify-content-end"},[s("router-link",{staticClass:"btn btn-outline-secondary btn-sm mb-4",attrs:{to:"/product"}},[s("i",{staticClass:"fas fa-arrow-left"}),t._v(" 返回列表\n            ")])],1),t._v(" "),s("div",{staticClass:"col-lg-6 col-md-7 pic-con mx-3 mx-sm-0",style:{"background-image":"url("+t.product.imageUrl+")"}},[s("img",{attrs:{src:e("IdH5"),width:"100%",alt:""}})]),t._v(" "),s("div",{staticClass:"col-lg-6 col-md-5 content my-sm-3 px-md-5"},[s("ul",[s("li",[s("b",[t._v("商品名稱")]),t._v(t._s(t.product.title))]),t._v(" "),s("li",[s("b",[t._v("單位")]),t._v("每份 / "+t._s(t.product.unit))]),t._v(" "),t._m(1),t._v(" "),t._m(2)]),t._v(" "),s("div",{staticClass:"pay"},[s("div",{staticClass:"d-flex justify-content-between"},[s("span",{staticClass:"text-secondary"},[t._v("小計 "+t._s(t._f("currency")(t.temp.num*t.product.price)))]),t._v(" "),s("div",{staticClass:"price"},[t.product.origin_price?t._e():s("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(t.product.price))+" 元")]),t._v(" "),t.product.origin_price?s("del",{staticClass:"h6 text-secondary"},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price)))]):t._e(),t._v(" "),t.product.origin_price?s("div",{staticClass:"h5"},[t._v("特價 "+t._s(t._f("currency")(t.product.price)))]):t._e()])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6 mb-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.temp.num,expression:"temp.num"}],staticClass:"form-control mr-3",attrs:{name:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.temp,"num",a.target.multiple?e:e[0])}}},t._l(10,function(a){return s("option",{key:a,domProps:{value:a}},[t._v("\n                    選購 "+t._s(a)+" 份\n                  ")])}),0)]),t._v(" "),s("div",{staticClass:"col-sm-6 cart mb-2"},[s("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(a){t.addtoCart(t.product.id,t.temp.num)}}},[t.product.id===t.status.loadingItem?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fas fa-cart-plus"}),t._v("\n                  加到購物車\n                ")])])])])]),t._v(" "),s("div",{staticClass:"col-md-12 mt-5"},[t.product.content?s("h4",{staticClass:"text-secondary"},[t._v("商品描述")]):t._e(),t._v(" "),s("p",[t._v(t._s(t.product.content))]),t._v(" "),s("hr"),t._v(" "),t.product.description?s("h4",{staticClass:"text-secondary"},[t._v("商品介紹")]):t._e(),t._v(" "),s("p",[t._v(t._s(t.product.description))])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"page-banner"},[a("h1",[this._v("產品介紹")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("b",[this._v("剩餘現貨")]),this._v("100 份")])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("b",[this._v("付款方式")]),a("i",{staticClass:"far fa-credit-card"}),this._v(" 模擬付款")])}]};var P=e("VU/8")(U,M,!1,function(t){e("v0Ph")},"data-v-2af3ecf8",null).exports,F={data:function(){return{products:[],carts:[],coupon_code:"",temp:{nums:0},status:{loadingItem:""},isLoading:!1}},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/products/all").then(function(a){t.isLoading=!1,t.products=a.data.products,console.log(a.data.products)})},getCart:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(e){a.isLoading=!1,a.carts=e.data.data,a.temp.nums=e.data.data.carts.length,t.$bus.$emit("get:cartval",e.data.data.carts.length)})},delCartItem:function(t){var a=this,e="https://vue-course-api.hexschool.io/api/belusa/cart/"+t;1==confirm("確定要刪除?")&&(a.status.loadingItem=t,this.$http.delete(e).then(function(){a.getCart(),a.status.loadingItem=""}))},addCouponCode:function(){var t=this,a={code:t.coupon_code};this.$http.post("https://vue-course-api.hexschool.io/api/belusa/coupon",{data:a}).then(function(a){t.getCart()})}},created:function(){this.getProducts(),this.getCart()}},V={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"cart-table"},[t.carts.final_total?e("div",{staticClass:"container"},[e("table",{staticClass:"table carts"},[t._m(1),t._v(" "),e("tbody",t._l(t.carts.carts,function(a,s){return e("tr",{key:s},[e("td",[e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto"},[a.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"far fa-trash-alt",on:{click:function(e){t.delCartItem(a.id)}}})])]),t._v(" "),e("td",[e("img",{attrs:{src:a.product.imageUrl,height:"40",alt:""}})]),t._v(" "),e("td",[t._v("\n              "+t._s(a.product.title)+"\n              "),a.coupon?e("p",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),e("td",[t._v(t._s(a.qty))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.product.price)))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.final_total)))])])}),0)])]):e("div",{staticClass:"container"},[t._m(2)])]),t._v(" "),t.carts.final_total?e("div",{staticClass:"pay"},[e("div",{staticClass:"container"},[e("div",{staticClass:"con"},[e("div",{staticClass:"total"},[t._v("\n          共計 "+t._s(t.temp.nums)+" 項商品 "),e("br"),t._v("\n          總計: "+t._s(t._f("currency")(t.carts.final_total))+"\n          "),e("span",[t._v("(不含運費) 皆以新台幣NTD付款")])]),t._v(" "),t.carts.final_total!==t.carts.total?e("div",{staticClass:"text-success"},[t._v("\n            折扣價: "+t._s(t._f("currency")(t.carts.total))+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"input-group my-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\n              套用優惠碼\n            ")])])]),t._v(" "),e("router-link",{staticClass:"btn btn-danger",attrs:{to:"/order"}},[t._v("\n          結帳去 "),e("i",{staticClass:"fas fa-arrow-right"})])],1)])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"page-banner"},[a("h1",[this._v("購物車")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("縮圖")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("品名")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("數量")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("單價")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("小計")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"row else-con"},[a("img",{attrs:{src:e("nKO3"),alt:""}})])}]};var R=e("VU/8")(F,V,!1,function(t){e("tbBe")},"data-v-4b9c385b",null).exports,O={data:function(){return{products:[],carts:[],temp:{nums:0},form:{user:{name:"",email:"",tel:"",address:""},message:""},status:{loadingItem:""},isLoading:!1}},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/products/all").then(function(a){t.isLoading=!1,t.products=a.data.products,console.log(a.data.products)})},getCart:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(e){a.isLoading=!1,a.carts=e.data.data,a.temp.nums=e.data.data.carts.length,t.$bus.$emit("get:cartval",e.data.data.carts.length)})},creatOrder:function(){var t=this,a=this,e=a.form;a.isLoading=!0,this.$validator.validate().then(function(s){s?t.$http.post("https://vue-course-api.hexschool.io/api/belusa/order",{data:e}).then(function(t){a.isLoading=!1,t.data.success&&a.$router.push("/customer_checkout/"+t.data.orderId),a.isLoading=!1,a.getCart(),console.log("訂單已建立",t)}):(console.log("欄位不完整"),a.isLoading=!1)})}},created:function(){this.getProducts(),this.getCart()}},q={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),t._m(0),t._v(" "),t.carts.final_total?e("div",{staticClass:"pay"},[e("div",{staticClass:"container"},[e("div",{staticClass:"my-5 row justify-content-center",on:{submit:function(a){return a.preventDefault(),t.creatOrder(a)}}},[e("form",{staticClass:"col-md-7",on:{submit:function(t){t.preventDefault()}}},[e("h3",[t._v("訂購資料")]),t._v(" "),e("table",{staticClass:"table carts mb-3"},[t._m(1),t._v(" "),e("tbody",t._l(t.carts.carts,function(a,s){return e("tr",{key:s},[e("td",[e("img",{attrs:{src:a.product.imageUrl,height:"40",alt:""}})]),t._v(" "),e("td",[t._v("\n                  "+t._s(a.product.title)+"\n                  "),a.coupon?e("p",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),e("td",[t._v(t._s(a.qty))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.product.price)))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.final_total)))])])}),0)]),t._v(" "),e("h3",[t._v("訂購人")]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t._v(" "),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v("\n              "+t._s(t.errors.first("email"))+"\n            ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t._v(" "),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("usertel")},attrs:{type:"tel",id:"usertel",name:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t._v(" "),t.errors.has("usertel")?e("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t._v(" "),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("留言")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),t._v(" "),t._m(2)])])])]):e("div",{staticClass:"non"},[t._v("購物車尚無資料")])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"page-banner"},[a("h1",[this._v("訂購商品")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("縮圖")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("品名")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("數量")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("單價")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("小計")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[this._v("送出訂單")])])}]};var j=e("VU/8")(O,q,!1,function(t){e("+IR8")},"data-v-77a2c2b1",null).exports,B={data:function(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder:function(){var t=this,a="https://vue-course-api.hexschool.io/api/belusa/order/"+t.orderId;t.isLoading=!0,this.$http.get(a).then(function(a){t.order=a.data.order,t.isLoading=!1})},payOrder:function(){var t=this,a="https://vue-course-api.hexschool.io/api/belusa/pay/"+t.orderId;t.isLoading=!0,this.$http.post(a).then(function(a){a.data.success&&t.getOrder(),t.isLoading=!1})},getCartVal:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(a){t.$bus.$emit("get:cartval",a.data.data.carts.length)})}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder(),vm.getCartVal()}},Q={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"my-5 row justify-content-center content"},[e("form",{staticClass:"col-md-6",on:{submit:function(a){return a.preventDefault(),t.payOrder(a)}}},[e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.order.products,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])}),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),t._v(" "),e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("th",{attrs:{width:"100"}},[t._v("Email")]),t._v(" "),e("td",[t._v(t._s(t.order.user.email))])]),t._v(" "),e("tr",[e("th",[t._v("姓名")]),t._v(" "),e("td",[t._v(t._s(t.order.user.name))])]),t._v(" "),e("tr",[e("th",[t._v("收件人電話")]),t._v(" "),e("td",[t._v(t._s(t.order.user.tel))])]),t._v(" "),e("tr",[e("th",[t._v("收件人地址")]),t._v(" "),e("td",[t._v(t._s(t.order.user.address))])]),t._v(" "),e("tr",[e("th",[t._v("付款狀態")]),t._v(" "),e("td",[t.order.is_paid?e("span",{staticClass:"text-success"},[t._v("付款完成")]):e("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])]),t._v(" "),!1===t.order.is_paid?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"page-banner"},[a("h1",[this._v("訂單資料")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("th",[this._v("品名")]),this._v(" "),a("th",[this._v("數量")]),this._v(" "),a("th",[this._v("單價")])])}]};var T=e("VU/8")(B,Q,!1,function(t){e("KIFn")},"data-v-5509a559",null).exports,G={methods:{signOut:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/logout").then(function(a){console.log(a.data),a.data.success&&t.$router.push("/signin")})}}},Z={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-primary"},[s("div",{staticClass:"container"},[t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarTogglerDemo01"}},[s("img",{staticClass:"d-none d-md-block",attrs:{src:e("JYcC"),height:"40",alt:""}}),t._v(" "),s("ul",{staticClass:"navbar-nav mr-auto mt-2 mt-lg-0 ml-md-3"},[s("li",{staticClass:"nav-item active"},[s("router-link",{staticClass:"nav-link ",attrs:{to:"/admin/products"}},[s("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表\n            ")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link ",attrs:{to:"/admin/coupon"}},[s("i",{staticClass:"fas fa-money-bill"}),t._v(" 優惠券管理\n            ")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link ",attrs:{to:"/admin/orderlist"}},[s("i",{staticClass:"fas fa-money-bill"}),t._v(" 訂單管理\n            ")])],1)]),t._v(" "),s("form",{staticClass:"form-inline my-2 my-lg-0"},[s("router-link",{staticClass:"btn btn-outline-light my-2 my-sm-0 mr-2",attrs:{target:"_blank",to:"/product"}},[t._v("\n            前端介面\n          ")]),t._v(" "),s("a",{staticClass:"btn btn-outline-warning my-2 my-sm-0",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signOut(a)}}},[t._v("管理員登出")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}]};var Y={name:"Alertarea",data:function(){return{messages:[]}},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout(function(){a.messages.forEach(function(e,s){e.timestamp===t&&a.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("msg:push",function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)})}},W={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert"},t._l(t.messages,function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v("\n    "+t._s(a.message)+"\n    "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},staticRenderFns:[]};var J={components:{Navs:e("VU/8")(G,Z,!1,function(t){e("g5Of")},"data-v-52ab6be7",null).exports,Alert:e("VU/8")(Y,W,!1,function(t){e("J/+0")},null,null).exports}},S={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("Navs"),this._v(" "),a("Alert"),this._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row justify-content-center"},[a("main",{staticClass:"col-md-10 col-lg-9 pt-4 px-4",attrs:{role:"main"}},[a("router-view")],1)])])],1)},staticRenderFns:[]};var z=e("VU/8")(J,S,!1,function(t){e("RkIA")},null,null).exports,H={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"signin-form"},[e("form",{staticClass:"form-signin",on:{submit:function(a){return a.preventDefault(),t.signin(a)}}},[t._m(0),t._v(" "),e("div",{staticClass:"form-label-group"},[e("label",[t._v("會員帳號")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入帳號",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-label-group"},[e("label",[t._v("會員密碼")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control mb-4",attrs:{type:"password",placeholder:"請輸入密碼",required:""},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("會員登入")])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"text-center"},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[this._v("會員登入")])])}]};var K=e("VU/8")({name:"HelloWorld",data:function(){return{user:{username:"",password:""},remember:""}},methods:{signin:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(a){a.data.success&&t.$router.push("/admin/products")})}}},H,!1,function(t){e("heUx")},"data-v-29c073ec",null).exports,X=e("woOf"),tt=e.n(X),at={data:function(){return{products:[],pagination:{},tempData:{},isNew:!1,isLoading:!1,status:{fileUploading:!1}}},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/belusa/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){a.products=t.data.products,a.isLoading=!1,a.pagination=t.data.pagination,console.log(t)})},openModel:function(t,a){t?(this.tempData={},this.isNew=!0):(this.tempData=tt()({},a),this.isNew=!1),C()("#modal-add").modal("show")},updateData:function(){var t="https://vue-course-api.hexschool.io/api/belusa/admin/product",a="post",e=this;e.isNew||(t="https://vue-course-api.hexschool.io/api/belusa/admin/product/"+e.tempData.id,a="put"),this.$http[a](t,{data:e.tempData}).then(function(t){t.data.success?(C()("#modal-add").modal("hide"),e.getProducts()):(C()("#modal-add").modal("hide"),e.getProducts(),console.log("失敗"+t.data))})},deletData:function(t){var a="https://vue-course-api.hexschool.io/api/belusa/admin/product/"+t,e=this;1==confirm("確定要刪除?")&&this.$http.delete(a).then(function(t){e.getProducts()})},uploadImg:function(){var t=this,a=this,e=this.$refs.files.files[0],s=new FormData;s.append("file-to-upload",e);a.status.fileUploading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/belusa/admin/upload",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.status.fileUploading=!1,e.data.success?a.$set(a.tempData,"imageUrl",e.data.imageUrl):t.$bus.$emit("msg:push",e.data.message,"danger")})}},created:function(){this.getProducts()}},et={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("button",{staticClass:"btn btn-outline-info",on:{click:function(a){t.openModel(!0)}}},[t._v("建立新產品")]),t._v(" "),e("div",{staticClass:"product-edit top"},[t._m(0),t._v(" "),t._l(t.products,function(a,s){return e("div",{key:a.id,staticClass:"detail-area"},[e("p",{staticClass:"category"},[t._v(t._s(a.category))]),t._v(" "),e("p",{staticClass:"title"},[t._v(t._s(a.title))]),t._v(" "),e("p",{staticClass:"price orng"},[t._v(t._s(t._f("currency")(a.origin_price)))]),t._v(" "),a.price?e("p",{staticClass:"price"},[t._v(t._s(t._f("currency")(a.price)))]):e("p",{staticClass:"price last"},[t._v("無")]),t._v(" "),e("p",{staticClass:"price"},[a.is_enabled?e("b",{staticClass:"onshelves"},[t._v("已上架")]):e("b",{staticClass:"out_stock"},[t._v("未上架")])]),t._v(" "),e("div",{staticClass:"edit-delet"},[e("button",{staticClass:"btn btn-outline-primary mr-1",on:{click:function(e){t.openModel(!1,a)}}},[t._v("編輯")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary ",on:{click:function(e){t.deletData(a.id)}}},[t._v("刪除")])])])})],2),t._v(" "),e("pagination",{attrs:{"page-data":t.pagination},on:{changepage:t.getProducts}}),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal-add",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 mt-2"},[e("label",[t._v("產品名稱")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.title,expression:"tempData.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入標題"},domProps:{value:t.tempData.title},on:{input:function(a){a.target.composing||t.$set(t.tempData,"title",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-md-6 mt-2"},[e("label",[t._v("分類")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.tempData.category,expression:"tempData.category"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.tempData,"category",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("-- 請選擇 --")]),t._v(" "),e("option",{attrs:{value:"巧克力"}},[t._v("巧克力")]),t._v(" "),e("option",{attrs:{value:"糕點區"}},[t._v("糕點區")]),t._v(" "),e("option",{attrs:{value:"糖果類"}},[t._v("甜品區")]),t._v(" "),e("option",{attrs:{value:"禮盒區"}},[t._v("禮盒區")])])]),t._v(" "),e("div",{staticClass:"col-md-6 mt-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("單位")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.unit,expression:"tempData.unit"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入單位"},domProps:{value:t.tempData.unit},on:{input:function(a){a.target.composing||t.$set(t.tempData,"unit",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6 mt-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("原價")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.origin_price,expression:"tempData.origin_price"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入原價"},domProps:{value:t.tempData.origin_price},on:{input:function(a){a.target.composing||t.$set(t.tempData,"origin_price",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v("售價")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.price,expression:"tempData.price"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入售價"},domProps:{value:t.tempData.price},on:{input:function(a){a.target.composing||t.$set(t.tempData,"price",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",[t._v("產品描述")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempData.description,expression:"tempData.description"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"請輸入產品描述"},domProps:{value:t.tempData.description},on:{input:function(a){a.target.composing||t.$set(t.tempData,"description",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",[t._v("說明內容")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempData.content,expression:"tempData.content"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"請輸入說明內容"},domProps:{value:t.tempData.content},on:{input:function(a){a.target.composing||t.$set(t.tempData,"content",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-5 mt-2"},[e("img",{attrs:{src:t.tempData.imageUrl,width:"90%",alt:""}})]),t._v(" "),e("div",{staticClass:"col-md-7 mt-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("圖片網址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.imageUrl,expression:"tempData.imageUrl"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入圖片連結"},domProps:{value:t.tempData.imageUrl},on:{input:function(a){a.target.composing||t.$set(t.tempData,"imageUrl",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("或上傳圖片 \n                  "),t.status.fileUploading?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),e("input",{ref:"files",staticClass:"form-control",attrs:{type:"file"},on:{change:t.uploadImg}})])]),t._v(" "),e("div",{staticClass:"col-md-6 mt-3"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.is_enabled,expression:"tempData.is_enabled"}],attrs:{type:"checkbox",value:"0"},domProps:{checked:Array.isArray(t.tempData.is_enabled)?t._i(t.tempData.is_enabled,"0")>-1:t.tempData.is_enabled},on:{change:function(a){var e=t.tempData.is_enabled,s=a.target,i=!!s.checked;if(Array.isArray(e)){var n=t._i(e,"0");s.checked?n<0&&t.$set(t.tempData,"is_enabled",e.concat(["0"])):n>-1&&t.$set(t.tempData,"is_enabled",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.tempData,"is_enabled",i)}}}),t._v(" 上架/取消上架\n              ")])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateData}},[t._v("確認")])])])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"detail-area"},[e("p",{staticClass:"category"},[t._v("分類")]),t._v(" "),e("p",{staticClass:"title"},[t._v("產品名稱")]),t._v(" "),e("p",{staticClass:"price"},[t._v("原價")]),t._v(" "),e("p",{staticClass:"price"},[t._v("售價")]),t._v(" "),e("p",{staticClass:"price"},[t._v("上架")]),t._v(" "),e("div",{staticClass:"edit-delet"},[t._v("編輯/刪除")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[this._v("建立新產品")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var st=e("VU/8")(at,et,!1,function(t){e("7jI3")},"data-v-f825890c",null).exports,it={data:function(){return{coupons:[],pagination:{},tempData:{title:"",percent:100},status:{fileUploading:!1},due_date:"",isLoading:!1,isNew:!1}},watch:{due_date:function(){var t=Math.floor(new Date(this.due_date)/1e3);this.tempData.due_date=t}},methods:{getCoupon:function(){var t="https://vue-course-api.hexschool.io/api/belusa/admin/coupons?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){a.coupons=t.data.coupons,a.isLoading=!1,a.pagination=t.data.pagination,console.log(t)})},openModel:function(t,a){t?(this.tempData={},this.due_date="",this.isNew=!0):(this.due_date=new Date(1e3*a.due_date).toISOString().split("T")[0],this.tempData=tt()({},a),this.isNew=!1),C()("#modal-add").modal("show")},updateData:function(){var t=this,a="https://vue-course-api.hexschool.io/api/belusa/admin/coupon",e="post",s=this;s.isNew||(a="https://vue-course-api.hexschool.io/api/belusa/admin/coupon/"+s.tempData.id,e="put"),this.$validator.validate().then(function(i){i?t.$http[e](a,{data:s.tempData}).then(function(t){t.data.success?(C()("#modal-add").modal("hide"),s.getCoupon()):(C()("#modal-add").modal("hide"),s.getCoupon(),console.log("失敗"+t.data))}):(console.log("欄位不完整"),s.isLoading=!1)})},deletData:function(t){var a="https://vue-course-api.hexschool.io/api/belusa/admin/coupon/"+t,e=this;1==confirm("確定要刪除?")&&this.$http.delete(a).then(function(t){e.getCoupon()})}},created:function(){this.getCoupon()}},nt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("button",{staticClass:"btn btn-outline-info",on:{click:function(a){t.openModel(!0)}}},[t._v("建立優惠券")]),t._v(" "),e("table",{staticClass:"table table-hover mt-4"},[t._m(0),t._v(" "),e("tbody",t._l(t.coupons,function(a,s){return e("tr",{key:a.id},[e("th",{attrs:{scope:"row"}},[t._v(t._s(a.title))]),t._v(" "),e("td",[t._v(t._s(a.code))]),t._v(" "),e("td",[t._v(t._s(a.percent))]),t._v(" "),e("td",[t._v(t._s(t._f("timestamp")(a.due_date)))]),t._v(" "),e("td",[a.is_enabled?e("b",{staticClass:"text-success"},[t._v("啟用")]):e("b",{staticClass:"text-danger"},[t._v("未啟用")])]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-primary mr-1",on:{click:function(e){t.openModel(!1,a)}}},[t._v("編輯")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary ",on:{click:function(e){t.deletData(a.id)}}},[t._v("刪除")])])])}),0)]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal-add",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[e("form",{staticClass:"modal-content",on:{submit:function(a){a.preventDefault(),t.updateData(!0)}}},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 mt-2"},[e("label",[t._v("優惠標題")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.title,expression:"tempData.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠標題"},domProps:{value:t.tempData.title},on:{input:function(a){a.target.composing||t.$set(t.tempData,"title",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-md-6 mt-2"},[e("label",[t._v("折扣(%)")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.percent,expression:"tempData.percent"}],staticClass:"form-control",attrs:{type:"text",placeholder:"填寫 80 即為打八折"},domProps:{value:t.tempData.percent},on:{input:function(a){a.target.composing||t.$set(t.tempData,"percent",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-md-6 mt-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("截止日期")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("end-date")},attrs:{type:"date",name:"end-date"},domProps:{value:t.due_date},on:{input:function(a){a.target.composing||(t.due_date=a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-12 mt-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"coupon-code"}},[t._v("優惠券編碼")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.code,expression:"tempData.code"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("coupon-code")},attrs:{type:"text",name:"coupon-code",id:"coupon-code",placeholder:"優惠券編碼"},domProps:{value:t.tempData.code},on:{input:function(a){a.target.composing||t.$set(t.tempData,"code",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-12 mt-3"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.is_enabled,expression:"tempData.is_enabled"}],attrs:{type:"checkbox",value:"0"},domProps:{checked:Array.isArray(t.tempData.is_enabled)?t._i(t.tempData.is_enabled,"0")>-1:t.tempData.is_enabled},on:{change:function(a){var e=t.tempData.is_enabled,s=a.target,i=!!s.checked;if(Array.isArray(e)){var n=t._i(e,"0");s.checked?n<0&&t.$set(t.tempData,"is_enabled",e.concat(["0"])):n>-1&&t.$set(t.tempData,"is_enabled",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.tempData,"is_enabled",i)}}}),t._v(" 啟用/關閉\n              ")])])])]),t._v(" "),t._m(2)])])]),t._v(" "),e("pagination",{attrs:{"page-data":t.pagination},on:{changepage:t.getCoupon}})],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("優惠標題")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("編碼")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("折扣 % 數")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("使用期限")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("是否啟用")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("修改 / 刪除")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[this._v("建立優惠券")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("取消")]),this._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("確認")])])}]},ot=e("VU/8")(it,nt,!1,null,null,null).exports,rt={name:"Navbar",data:function(){return{products:[],product:{},carts:[],status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1,coupon_code:""}},computed:{},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/products").then(function(a){t.products=a.data.products,t.isLoading=!1,console.log(a)})},getProduct:function(t){var a=this,e="https://vue-course-api.hexschool.io/api/belusa/product/"+t;a.isLoading=!0,a.status.loadingItem=t,this.$http.get(e).then(function(t){a.product=t.data.product,a.status.loadingItem="",C()("#productModal").modal("show"),a.isLoading=!1,console.log(t)})},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this;e.status.loadingItem=t;var s={product_id:t,qty:a};this.$http.post("https://vue-course-api.hexschool.io/api/belusa/cart",{data:s}).then(function(t){C()("#productModal").modal("hide"),e.status.loadingItem="",e.getCart(),console.log(t)})},getCart:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/belusa/cart").then(function(a){t.isLoading=!1,t.carts=a.data.data})},delCartItem:function(t){var a=this,e="https://vue-course-api.hexschool.io/api/belusa/cart/"+t;a.isLoading=!0,this.$http.delete(e).then(function(){a.getCart(),a.isLoading=!1})},addCouponCode:function(){var t=this,a={code:t.coupon_code};this.$http.post("https://vue-course-api.hexschool.io/api/belusa/coupon",{data:a}).then(function(a){t.getCart(),console.log(a)})},creatOrder:function(){var t=this,a=this,e=a.form;a.isLoading=!0,this.$validator.validate().then(function(s){s?t.$http.post("https://vue-course-api.hexschool.io/api/belusa/order",{data:e}).then(function(t){a.isLoading=!1,t.data.success&&a.$router.push("/customer_checkout/"+t.data.orderId),a.isLoading=!1,console.log("訂單已建立",t)}):console.log("欄位不完整")})}},created:function(){this.getProducts(),this.getCart()}},ct={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"row mt-4"},t._l(t.products,function(a){return e("div",{key:a.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 shadow-sm"},[e("div",{staticClass:"pro-pic",style:{backgroundImage:"url("+a.imageUrl+")"}}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(a.description))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.origin_price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.price))+" 元")]),t._v(" "),a.origin_price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(a.origin_price))+" 元")]):t._e(),t._v(" "),a.origin_price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(a.price))+" 元")]):t._e()])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){t.getProduct(a.id)}}},[t.product.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            查看更多\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){t.addtoCart(a.id)}}},[t.product.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])])])}),0),t._v(" "),e("div",{staticClass:"row mt-4"},[t.carts.final_total?e("table",{staticClass:"table carts"},[t._m(0),t._v(" "),e("tbody",t._l(t.carts.carts,function(a,s){return e("tr",{key:s},[e("td",[e("button",{on:{click:function(e){t.delCartItem(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),e("td",[e("img",{attrs:{src:a.product.imageUrl,height:"40",alt:""}})]),t._v(" "),e("td",[t._v("\n            "+t._s(a.product.title)+"\n            "),a.coupon?e("p",{staticClass:"text-success"},[t._v("以套用優惠券")]):t._e()]),t._v(" "),e("td",[t._v(t._s(a.qty))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.product.price)))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.final_total)))])])}),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("總計: ")]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(t.carts.final_total)))])]),t._v(" "),t.carts.final_total!==t.carts.total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"5"}},[t._v("折扣價: ")]),t._v(" "),e("td",{staticClass:" text-success"},[t._v(t._s(t._f("currency")(t.carts.total)))])]):t._e()])]):t._e(),t._v(" "),e("div",{staticClass:"input-group my-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\n          套用優惠碼\n        ")])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),t._v(" "),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),t._v(" "),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.origin_price?t._e():e("div",{staticClass:"h4"},[t._v(t._s(t._f("currency")(t.product.price))+" 元")]),t._v(" "),t.product.origin_price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]):t._e(),t._v(" "),t.product.origin_price?e("div",{staticClass:"h4"},[t._v("現在只要 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"num",a.target.multiple?e:e[0])}}},t._l(10,function(a){return e("option",{key:a,domProps:{value:a}},[t._v("\n              選購 "+t._s(a)+" 份 (每份/"+t._s(t.product.unit)+")\n            ")])}),0)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n            小計 "),e("strong",[t._v(t._s(t.product.price*t.product.num))]),t._v(" 元\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){t.addtoCart(t.product.id,t.product.num)}}},[t.product.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])])])]),t._v(" "),e("div",{staticClass:"my-5 row justify-content-center",on:{submit:function(a){return a.preventDefault(),t.creatOrder(a)}}},[e("form",{staticClass:"col-md-6",on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t._v(" "),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v("\n          "+t._s(t.errors.first("email"))+"\n        ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t._v(" "),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("usertel")},attrs:{type:"tel",id:"usertel",name:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t._v(" "),t.errors.has("usertel")?e("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t._v(" "),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("留言")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),t._v(" "),t._m(2)])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("縮圖")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("品名")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("數量")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("單價")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("小計")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[this._v("送出訂單")])])}]};e("VU/8")(rt,ct,!1,function(t){e("qbp3")},"data-v-367f611d",null).exports;var lt=e("fZjL"),dt=e.n(lt),ut={data:function(){return{list:[],pagination:{},tempData:{},temp:{msg:""},status:{loadingItem:""},isLoading:!1}},methods:{getOrderlist:function(){var t="https://vue-course-api.hexschool.io/api/belusa/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),a=this;a.isLoading=!0,this.$http.get(t).then(function(t){a.list=t.data.orders,a.isLoading=!1,a.pagination=t.data.pagination,console.log(t)})},productKey:function(t){var a=dt()(this.list[t].products)[0],e=this.list[t].products[a];return e.product.title+" * "+e.qty},openMsg:function(t){this.temp.msg=t,C()("#message").modal("show")},openModel:function(t){this.tempData=tt()({},t),C()("#modal-edit").modal("show")},updateData:function(){var t=this,a="https://vue-course-api.hexschool.io/api/belusa/admin/order/"+t.tempData.id;this.$http.put(a,{data:t.tempData}).then(function(a){a.data.success?(C()("#modal-add").modal("hide"),t.getOrderlist()):(C()("#modal-add").modal("hide"),t.getOrderlist(),console.log("失敗"+a.data)),C()("#modal-edit").modal("hide")})}},created:function(){this.getOrderlist()}},vt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"list-con"},[e("div",{staticClass:"container"},[e("div",{staticClass:"scroll-area"},[e("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),e("tbody",t._l(t.list,function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{scope:"row"}},[e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",on:{click:function(e){t.openModel(a)}}},[e("i",{staticClass:"fas fa-pen"})])]),t._v(" "),e("td",[t._v(t._s(t._f("timestamp")(a.create_at)))]),t._v(" "),e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.total)))]),t._v(" "),e("td",[t._v("\n              姓名: "+t._s(a.user.name)+" "),e("br"),t._v("\n              電子信箱: "+t._s(a.user.email)+" "),e("br"),t._v("\n              連絡電話: "+t._s(a.user.tel)+"\n            ")]),t._v(" "),e("td",[t._v("\n              名稱/數量 "),e("br"),t._v("\n              "+t._s(t.productKey(s))+"\n            ")]),t._v(" "),e("td",[a.is_paid?e("b",{staticClass:"text-success d-block"},[t._v("已付款")]):t._e(),t._v(" "),a.is_paid?e("b",{staticClass:"text-success"},[t._v("付款日期: "+t._s(t._f("timestamp")(a.paid_date)))]):t._e(),t._v(" "),a.is_paid?t._e():e("b",{staticClass:"text-danger"},[t._v("未付款")])]),t._v(" "),e("td",[a.message?e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){t.openMsg(a.message)}}},[e("i",{staticClass:"fas fa-comment"})]):e("span",[t._v("無")])])])}),0)])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"message",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body"},[t._v("\n          "+t._s(t.temp.msg)+"\n        ")])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"modal-edit",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempData.message,expression:"tempData.message"}],staticClass:"form-control",attrs:{cols:"30",rows:"10"},domProps:{value:t.tempData.message},on:{input:function(a){a.target.composing||t.$set(t.tempData,"message",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){t.updateData()}}},[t._v("確認")])])])])]),t._v(" "),e("pagination",{attrs:{"page-data":t.pagination},on:{changepage:t.getOrderlist}})],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("建立日期")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("訂單編號")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("總金額")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("客戶資訊")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("產品資訊")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("付款狀態")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("備註")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[this._v("備註填寫")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var pt=e("VU/8")(ut,vt,!1,function(t){e("qkBr")},"data-v-3bf55aa2",null).exports;s.a.use(g.a);var mt=new g.a({routes:[{path:"*",redirect:"login"},{path:"/",name:"Front",component:D,children:[{path:"/",name:"Home",component:L},{path:"product",name:"Front_product",component:E},{path:"item/:itemId",name:"Front_item",component:P},{path:"cart",name:"Front_cart",component:R},{path:"order",name:"Front_order",component:j},{path:"customer_checkout/:orderId",name:"Front_checkout",component:T}]},{path:"/login",name:"Back_Login",component:K},{path:"/admin",name:"Back",component:z,children:[{path:"products",name:"Back_Products",component:st,meta:{requiresAuth:!0}},{path:"coupon",name:"Back_coupon",component:ot,meta:{requiresAuth:!0}},{path:"orderlist",name:"Back_orderlist",component:pt,meta:{requiresAuth:!0}}]}]});s.a.prototype.$bus=new s.a;var _t={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pagination-area"},[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pageData.has_pre}},[t._m(0)]),t._v(" "),t._l(t.pageData.total_pages,function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a===t.pageData.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.changePage(a)}}},[t._v(t._s(a))])])}),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.pageData.has_next}},[t._m(1)])],2)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("«")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("»")])])}]};var ht=e("VU/8")({name:"pagination",props:["pageData"],methods:{changePage:function(t){this.$emit("changepage",t)}},created:function(){}},_t,!1,function(t){e("6fgk")},null,null).exports;s.a.config.productionTip=!1,s.a.use(l.a,n.a),s.a.use(d.a),d.a.Validator.localize("zh_TW",v.a),s.a.use(m.a),s.a.component("Loading",r.a),s.a.component("pagination",ht),s.a.filter("currency",function(t){return"$"+Number(t).toFixed(0).replace(/./g,function(t,a,e){return a&&"."!==t&&(e.length-a)%3==0?(", "+t).replace(/\s/g,""):t})}),s.a.filter("timestamp",function(t){return new Date(1e3*t).toLocaleDateString()}),n.a.defaults.withCredentials=!0,new s.a({el:"#app",router:mt,components:{App:h},template:"<App/>"}),mt.beforeEach(function(t,a,e){if(t.meta.requiresAuth){n.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){t.data.success?e():e({path:"/login"})})}else e()})},RkIA:function(t,a){},SYh3:function(t,a){},g5Of:function(t,a){},heUx:function(t,a){},nKO3:function(t,a,e){t.exports=e.p+"static/img/cart-no.0ae31b1.jpg"},qbp3:function(t,a){},qkBr:function(t,a){},shAo:function(t,a){},"tH/D":function(t,a){},tbBe:function(t,a){},v0Ph:function(t,a){},v2ns:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.9ca3c3cf2f529dd380e4.js.map